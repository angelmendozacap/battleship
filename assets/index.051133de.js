import{s as e,k as t,z as a,d as l,p as s,b as n,o,c,w as r,A as i,u,e as d,a as m,F as v,q as p}from"./vendor.9e925689.js";import{u as f}from"./config.26398668.js";import{u as h}from"./game.f343fb70.js";var A,k;(k=A||(A={})).DESTROYER="destroyer",k.SUBMARINE="submarine",k.CRUISER="cruiser",k.BATTLESHIP="battleship";function E(){const l=e(10),s=e([]),n=t((()=>{return e=l.value,[{id:1,name:A.DESTROYER,size:1,directions:{horizontal:[0],vertical:[0]},count:4},{id:2,name:A.SUBMARINE,size:2,directions:{horizontal:[0,1],vertical:[0,e]},count:3},{id:3,name:A.CRUISER,size:3,directions:{horizontal:[0,1,2],vertical:[0,e,2*e]},count:2},{id:4,name:A.BATTLESHIP,size:4,directions:{horizontal:[0,1,2,3],vertical:[0,e,2*e,3*e]},count:1}];var e})),{saveGameHistory:o,addSunkenShip:c,setTotalAttempts:r,setAttemptsRemaining:i,setWin:u,setGameOver:d}=h(),{setAttempts:m,config:v}=f();function p(){for(let e=0;e<l.value*l.value;e++)s.value.push({taken:!1,boom:!1,miss:!1})}function k(e){const t=Object.keys(e.directions),a=Math.floor(Math.random()*t.length),n=t[a],o=e.directions[n];let c=0;0===a&&(c=1),1===a&&(c=10);const r=Math.abs(Math.floor(Math.random()*s.value.length-o.length*c)),i=o.some((e=>s.value[r+e].taken)),u=o.some((e=>(r+e)%l.value==l.value-1)),d=o.some((e=>(r+e)%l.value==0));i||u||d?k(e):o.forEach((t=>{s.value[r+t].taken=!0,s.value[r+t].shipName=e.name.toLowerCase()}))}const E=e(0),b=e(0),R=e(0),S=e(0);function I(e){d(!0),u(e),i(v.numberOfAttempts),o()}return a((()=>{p(),n.value.forEach((e=>{for(let t=0;t<e.count;t++)k(e)})),r(v.numberOfAttempts)})),{cells:s,boardSize:l,createBoard:p,generateShip:k,setCellAttacked:function(e){const t=s.value[e],{taken:a,shipName:l}=t,o=v.numberOfAttempts-1;m(o),v.numberOfAttempts>0?(a?(l===A.DESTROYER&&E.value++,l===A.SUBMARINE&&b.value++,l===A.CRUISER&&R.value++,l===A.BATTLESHIP&&S.value++,t.boom=!0):t.miss=!0,function(){const e=10;n.value.forEach((t=>{const{name:a,size:l,count:s}=t,n=l*s;a===A.DESTROYER&&E.value===n&&(c(a),E.value=e),a===A.SUBMARINE&&b.value===n&&(b.value=e,c(a)),a===A.CRUISER&&R.value===n&&(R.value=e,c(a)),a===A.BATTLESHIP&&S.value===n&&(S.value=e,c(a))})),E.value+b.value+R.value+S.value===4*e&&I(!0)}()):I(!1)},shipArray:n}}var b=l({name:"Cell",props:{cell:{type:Object,required:!0},cellIndex:{type:Number,required:!0}},emits:["attack"],setup:(e,{emit:t})=>({handleAttack:()=>{t("attack",e.cellIndex)}})});const R=r();s("data-v-422d332e");const S={key:0,class:"cell miss"},I={key:1,class:"cell boom relative"};n();const C=R(((e,t,a,l,s,n)=>e.cell.miss?(o(),c("div",S)):e.cell.shipName&&e.cell.boom?(o(),c("div",I)):(o(),c("div",{key:2,class:"cell",onClick:t[1]||(t[1]=(...t)=>e.handleAttack&&e.handleAttack(...t))}))));b.render=C,b.__scopeId="data-v-422d332e";var B=l({name:"BattleField",components:{Cell:b},setup(){const e=u(),{cells:t,setCellAttacked:a}=E(),{config:l}=f(),{game:s}=h();return i((()=>{s.over&&e.push({name:"GameOver"})})),{config:l,computerCells:t,setCellAttacked:a}}});const T=r();s("data-v-83dc96be");const g={class:"flex justify-center w-full"},O={class:"battleship-grid border-board"};n();const y=T(((e,t,a,l,s,n)=>{const r=d("Cell");return o(),c("div",g,[m("div",O,[(o(!0),c(v,null,p(e.computerCells,((t,a)=>(o(),c(r,{key:a,cell:t,"cell-index":a,onAttack:e.setCellAttacked},null,8,["cell","cell-index","onAttack"])))),128))])])}));B.render=y,B.__scopeId="data-v-83dc96be";var z=l({name:"BattleshipBoard",components:{BattleField:B}});z.render=function(e,t,a,l,s,n){const r=d("BattleField");return o(),c(r)};export default z;
