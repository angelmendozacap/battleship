import{q as e,x as t,y as a,d as s,o as l,c as n,z as r,A as o,p as c,b as i,e as u,a as d,F as m,n as v,w as p}from"./vendor.4873629a.js";import{u as f}from"./config.f650ac0a.js";import{u as h}from"./game.a6ed6d1f.js";function b(){const s=e(10),l=e([]),n=t((()=>{return[{id:1,name:"destroyer",size:1,directions:{horizontal:[0],vertical:[0]},count:4},{id:2,name:"submarine",size:2,directions:{horizontal:[0,1],vertical:[0,e=s.value]},count:3},{id:3,name:"cruiser",size:3,directions:{horizontal:[0,1,2],vertical:[0,e,2*e]},count:2},{id:4,name:"battleship",size:4,directions:{horizontal:[0,1,2,3],vertical:[0,e,2*e,3*e]},count:1}];var e})),{saveGameHistory:r,addSunkenShip:o,setNumberOfAttempts:c,setNumberOfAttemptsUsed:i,setWin:u,setGameOver:d}=h(),{setAttempts:m,config:v}=f();function p(){for(let e=0;e<s.value*s.value;e++)l.value.push({taken:!1,boom:!1,miss:!1})}function b(e){const t=Object.keys(e.directions),a=Math.floor(Math.random()*t.length),n=t[a],r=e.directions[n];let o=0;0===a&&(o=1),1===a&&(o=10);const c=Math.abs(Math.floor(Math.random()*l.value.length-r.length*o)),i=r.some((e=>l.value[c+e].taken)),u=r.some((e=>(c+e)%s.value==s.value-1)),d=r.some((e=>(c+e)%s.value==0));i||u||d?b(e):r.forEach((t=>{l.value[c+t].taken=!0,l.value[c+t].shipName=e.name.toLowerCase()}))}const k=e(0),A=e(0),y=e(0),g=e(0);function C(e){d(!0),u(e),i(v.numberOfAttempts),r()}return a((()=>{p(),n.value.forEach((e=>{for(let t=0;t<e.count;t++)b(e)})),c(v.numberOfAttempts)})),{cells:l,boardSize:s,createBoard:p,generateShip:b,setCellAttacked:function(e){const t=l.value[e],{taken:a,shipName:s}=t,r=v.numberOfAttempts-1;m(r),v.numberOfAttempts>0?(a?("destroyer"===s&&k.value++,"submarine"===s&&A.value++,"cruiser"===s&&y.value++,"battleshipCount"===s&&g.value++,t.boom=!0):t.miss=!0,n.value.forEach((e=>{const{name:t,size:a,count:s}=e,l=a*s;"destroyer"===t&&k.value===l&&(k.value=10,o(e)),"submarine"===t&&A.value===l&&(A.value=10,o(e)),"cruiser"===t&&y.value===l&&(y.value=10,o(e)),"battleshipCount"===t&&g.value===l&&(g.value=10,o(e))})),k.value+A.value+y.value+g.value===40&&C(!0)):C(!1)},shipArray:n}}var k=s({name:"Cell",props:{cell:{type:Object,required:!0},cellIndex:{type:Number,required:!0}},emits:{attack:e=>e},setup:(e,{emit:t})=>({handleAttack:()=>{t("attack",e.cellIndex)}})});const A={key:0,class:"bg-gray-100"},y={key:1,class:"bg-red-500"};k.render=function(e,t,a,s,r,o){return e.cell.miss?(l(),n("div",A)):e.cell.shipName&&e.cell.boom?(l(),n("div",y)):(l(),n("div",{key:2,onClick:t[1]||(t[1]=(...t)=>e.handleAttack&&e.handleAttack(...t))}))};var g=s({name:"BattleField",components:{Cell:k},setup(){const e=o(),{cells:t,setCellAttacked:a}=b(),{config:s}=f(),{game:l}=h();return r((()=>{l.over&&e.push({name:"GameOver"})})),{config:s,computerCells:t,setCellAttacked:a}}});const C=p();c("data-v-5e2f6ea0");const z={class:"flex justify-center w-full"},O={class:"battleship-grid border-board"};i();const x=C(((e,t,a,s,r,o)=>{const c=u("Cell");return l(),n("div",z,[d("div",O,[(l(!0),n(m,null,v(e.computerCells,((t,a)=>(l(),n(c,{key:a,class:"border-board",cell:t,"cell-index":a,onAttack:e.setCellAttacked},null,8,["cell","cell-index","onAttack"])))),128))])])}));g.render=x,g.__scopeId="data-v-5e2f6ea0";var j=s({name:"BattleshipBoard",components:{BattleField:g}});j.render=function(e,t,a,s,r,o){const c=u("BattleField");return l(),n(c)};export default j;
